СПИСОК ФАЙЛОВ
- services/q_core_agent/core/neural_engine.py

## Вход и цель
- [Факт] Проанализировать `neural_engine.py` — генератор предложений на базе нейросети (заглушка).
- [Гипотеза] Файл послужит шаблоном для будущего ML-модуля.

## Сбор контекста
- [Факт] Зависит от `INeuralEngine`, `agent_logger`, proto `Proposal` и `UUID`.
- [Гипотеза] Реализация предполагает интеграцию с настоящей моделью в дальнейшем.

## Локализация артефакта
- [Факт] Путь: `services/q_core_agent/core/neural_engine.py`.
- [Факт] Вызывается из `AgentContext` при необходимости сгенерировать предложения.

## Фактический разбор
- [Факт] Класс `NeuralEngine` принимает `context` и `config`, флаг `mock_neural_proposals_enabled`.
- [Факт] Метод `generate_proposals` возвращает список `Proposal`; при включенном флаге создаёт мок с фиксированными полями.
- [Гипотеза] В продакшн-версии метод будет заполнять `proposed_actions` реальными командами.

## Роль в системе и связи
- [Факт] Предоставляет предложения другим подсистемам через интерфейс `INeuralEngine`.
- [Гипотеза] Используется `ProposalEvaluator` для отбора лучших предложений.

## Несоответствия и риски
- [Факт] Возвращается пустой список, если мок выключен — риск отсутствия предложений (Med).
- [Гипотеза] Нет ограничений на количество генерируемых предложений — потенциальная нагрузка (Low).

## Мини-патчи (safe-fix)
- [Патч] Добавить предупреждение в лог при отключенном мок-режиме и пустом выводе.
- [Патч] В `config` предусмотреть параметр лимита предложений.

## Рефактор-скетч
```python
# [Патч] уведомление об отсутствии предложений
proposals: List[Proposal] = []
if not self.mock_neural_proposals_enabled:
    logger.warning("NeuralEngine: no ML model connected")
    return proposals
```

## Примеры использования
```python
from core.neural_engine import NeuralEngine
engine = NeuralEngine(context, {"mock_neural_proposals_enabled": True})
engine.generate_proposals(context)             # [Факт]
```
```python
NeuralEngine(context, {}).generate_proposals(context)  # [Гипотеза] вернёт []
```
```bash
pytest tests/test_agent.py::test_neural_engine  # [Факт] пример теста
```
```bash
python -c "from core.neural_engine import NeuralEngine;print('ok')"  # [Факт]
```
```bash
pip install google-cloud-aiplatform  # [Гипотеза] возможная ML-интеграция
```

## Тест-хуки/чек-лист
- [Факт] Проверить генерацию мок-предложения и значения `priority`/`confidence`.
- [Гипотеза] Тестировать обработку отключённого режима без падений.

## Вывод
- [Факт] Модуль выполняет роль простой заглушки нейродвижка.
- [Факт] Структура готова к расширению через реальные модели.
- [Патч] Добавить логирование при отсутствии предложений и лимитировать вывод.
- [Гипотеза] В будущем потребуется загрузка модели и управление ресурсами.
- [Факт] Модуль минимален и легко покрывается тестами.
- [Гипотеза] Можно вынести конфигурацию в отдельный файл.
- [Факт] Сейчас используется только в демонстрационных целях.
- [Патч] Рекомендуется документировать формат `proposed_actions`.
- [Гипотеза] При расширении стоит учесть параллелизм.
- [Факт] Поддержка таймштампа уже присутствует.

СПИСОК ФАЙЛОВ
- services/q_core_agent/core/neural_engine.py
