СПИСОК ФАЙЛОВ
- services/q_core_agent/core/qiki_mission_control_pro.py

## Вход и цель
- [Факт] Проанализировать `qiki_mission_control_pro.py` — расширенный профессиональный терминал.
- [Гипотеза] Предназначен для полноценного мониторинга и управления миссией.

## Сбор контекста
- [Факт] Использует `prompt_toolkit`, `ShipCore`, `ShipActuatorController`, `ShipLogicController` и множество панелей.
- [Факт] Ведёт фоновые обновления телеметрии с флуктуациями и событиями.
- [Гипотеза] Проектируется как основная версия интерфейса.

## Локализация артефакта
- [Факт] Путь: `services/q_core_agent/core/qiki_mission_control_pro.py`.
- [Факт] Запуск: `python qiki_mission_control_pro.py`.

## Фактический разбор
- [Факт] Класс `QIKIMissionControlPro` создаёт сложный layout с тремя колонками и командной строкой.
- [Факт] Поддерживаются переключение языка (F12), автопилот (F1), аварийная остановка (F2).
- [Гипотеза] `live_telemetry` расширяем через `_background_simulation` для реалистичных данных.

## Роль в системе и связи
- [Факт] Функционирует как основной интерфейс оператора.
- [Гипотеза] Может интегрироваться с внешними сервисами визуализации.

## Несоответствия и риски
- [Факт] Использование `os.system` для установки зависимостей — риск безопасности (Med).
- [Гипотеза] Отсутствие ограничений на рост `event_log` без ротации (Low).

## Мини-патчи (safe-fix)
- [Патч] Заменить `os.system` на `subprocess` с проверкой ошибок.
- [Патч] Добавить лимит или очистку `event_log` по времени.

## Рефактор-скетч
```python
# [Патч] безопасная установка
import subprocess, sys
subprocess.check_call([sys.executable, "-m", "pip", "install", "prompt_toolkit"])
```

## Примеры использования
```bash
python qiki_mission_control_pro.py               # [Факт]
```
```python
from core.qiki_mission_control_pro import QIKIMissionControlPro
QIKIMissionControlPro().run()                   # [Факт]
```
```bash
F12                                              # [Факт] переключение языка
```
```bash
F1                                               # [Факт] автопилот
```
```bash
F2                                               # [Факт] аварийная остановка
```

## Тест-хуки/чек-лист
- [Факт] Юнит: проверка `_update_live_telemetry` на корректные диапазоны.
- [Факт] Интеграция: запуск UI и имитация горячих клавиш.
- [Гипотеза] Нагрузочный тест долгого ведения `event_log`.

## Вывод
- [Факт] Модуль предоставляет богатый функционал управления и отображения.
- [Факт] Фоновые процессы поддерживают реалистичность данных.
- [Патч] Улучшить безопасность установки зависимостей и управление логом.
- [Гипотеза] Возможна модульность панелей для гибкой настройки.
- [Факт] Наличие многоязычности повышает удобство операторов.
- [Гипотеза] Можно добавить поддержку сценариев миссий через конфиги.
- [Факт] Код содержит повторяющиеся элементы с `MissionControlTerminal`.
- [Патч] Вынести общие компоненты в модуль.
- [Гипотеза] Рассмотреть асинхронную обработку команд.
- [Факт] Terminal Pro служит основным рабочим инструментом.

СПИСОК ФАЙЛОВ
- services/q_core_agent/core/qiki_mission_control_pro.py
