# СПИСОК ФАЙЛОВ
- proto_extensions/utils/generate_mock_messages.py

## Вход и цель
[Факт] Анализ утилиты генерации моков `generate_mock_messages.py`.
[Гипотеза] Итог — чек-лист и предложения улучшений.

## Сбор контекста
[Факт] Скрипт создает JSON-моки для `SensorReading`, `ActuatorCommand`, `Proposal`.
[Гипотеза] Используется для тестов или демонстраций.

## Локализация артефакта
[Факт] Путь: `proto_extensions/utils/generate_mock_messages.py`.
[Гипотеза] Запускается вручную, зависит от пакета `generated`.

## Фактический разбор
- [Факт] Импортирует `json`, `os`, `MessageToDict`, и модули `generated`.
- [Факт] `MOCK_DIR = "proto_extensions/mocks"`.
- [Факт] Функции `gen_sensor_mock`, `gen_actuator_mock`, `gen_proposal_mock` пишут файлы через `write_mock`.
- [Гипотеза] Нет обработки ошибок при записи.

## Роль в системе и связи
[Факт] Обеспечивает быстрые примеры сообщений для разработчиков.
[Гипотеза] Может служить шаблоном для unit-тестов.

## Несоответствия и риски
- [Факт] Директория моков создается при запуске — риск перезаписи (Low).
- [Гипотеза] Отсутствует очистка старых файлов (Low).

## Мини-патчи (safe-fix)
[Патч] Проверять существование файла и предупреждать о перезаписи.

## Примеры использования
```python
# 1. Генерация всех моков
python proto_extensions/utils/generate_mock_messages.py

# 2. Использование функции отдельно
from proto_extensions.utils import generate_mock_messages as gm
gm.gen_sensor_mock()

# 3. Чтение созданного файла
import json, os
path = os.path.join(gm.MOCK_DIR, "sensor_reading.mock.json")
print(json.load(open(path)))

# 4. Подмена директории
gm.MOCK_DIR = "/tmp/mocks"

# 5. Расширение: добавление новой функции
def gen_custom_mock():
    pass
```

## Тест-хуки/чек-лист
- [Факт] Проверить создание файлов в `MOCK_DIR`.
- [Гипотеза] Тест на перезапись существующих файлов.
- [Факт] Проверить корректность JSON через `json.load`.

## Вывод
1. [Факт] Скрипт успешно генерирует три типа моков.
2. [Гипотеза] Требуются проверки на перезапись.
3. [Патч] Добавить предупреждения при существующих файлах.
4. [Факт] Простая структура облегчает расширение.
5. [Гипотеза] Возможна интеграция в CI для создания фикстур.
6. [Факт] Примеры демонстрируют запуск и использование.
7. [Гипотеза] Нужны тесты на корректность содержимого.
8. [Факт] Path и зависимость `generated` указаны.
9. [Гипотеза] Риски низкие.
10. [Патч] Рассмотреть параметризацию `MOCK_DIR`.

# СПИСОК ФАЙЛОВ
- proto_extensions/utils/generate_mock_messages.py
