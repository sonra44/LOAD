СПИСОК ФАЙЛОВ

# design.md.template — анализ

## Вход и цель
- [Факт] Markdown-шаблон описания дизайна компонента.
- [Гипотеза] Используется для генерации структурированных design-доков.

## Сбор контекста
- [Факт] Содержит YAML-преамбулу с `component_name`, `version`, `author`, `created_at`, `template`.
- [Факт] Имеет разделы: обзор, архитектура, API, анти-паттерны, вопросы, тесты.
- [Гипотеза] Расширяется средствами Jinja2 и qiki-docgen.

## Локализация артефакта
- [Факт] Путь: `QIKI_DTMP/tools/qiki_docgen/templates/design.md.template`.
- [Гипотеза] Точка входа: `qiki-docgen design <component>`.

## Фактический разбор
- [Факт] Раздел "0. Мета-информация" перечисляет версию, автора и дату.
- [Факт] Включает пример диаграммы Mermaid.
- [Факт] Предусматривает ссылки на protobuf-файлы и тесты.
- [Гипотеза] Структура ориентирована на русскоязычную документацию.

## Роль в системе и связи
- [Гипотеза] Формирует единый формат документации для микросервисов.
- [Гипотеза] Связан с генерацией README и протокольных контрактов.

## Несоответствия и риски
- Med: [Гипотеза] Отсутствие проверки заполнения секций может привести к пустой документации.
- Low: [Гипотеза] Жёсткая структура может быть избыточной для простых компонентов.

## Мини-патчи (safe-fix)
- [Патч] Добавить инструкции по обязательности заполнения разделов.
- [Патч] Указать ссылку на шаблон прототипа в "API Контракты".

## Рефактор-скетч (по желанию)
```markdown
---
component_name: Example
version: 0.1.0
author: Team
created_at: 2025-01-01
template: default
---
# Дизайн: Example
```

## Примеры использования
```bash
qiki-docgen design componentX > design.md
```
```bash
cat design.md
```
```python
import jinja2
```
```python
template.render(component_name="X")
```
```bash
mermaid-cli -i diagram.mmd -o diagram.svg
```

## Тест-хуки/чек-лист
- Проверить корректность YAML-преамбулы.
- Убедиться, что все обязательные разделы заполнены.
- Проверить рендеринг Mermaid-диаграммы.
- Валидировать ссылки на protobuf-файлы.
- Генерировать документ и просмотреть в Markdown-рендере.

## Вывод
1. Шаблон задаёт структуру дизайн-документа.
2. Фронт-маттер обеспечивает метаданные компонента.
3. Диаграммы и ссылки позволяют визуализировать архитектуру.
4. Не все разделы обязательны, что требует контроля.
5. Немедленный фикс: добавить инструкции по заполнению секций.
6. Отложенное: автоматизировать проверку полноты документа.
7. Шаблон служит основой для README и документации.
8. Содержит пример Mermaid-диаграммы для визуализации.
9. Требует тестов рендера и наличия всех ссылок.
10. После фиксов можно включить в CI процесс doc-генерации.

СПИСОК ФАЙЛОВ
