СПИСОК ФАЙЛОВ

# component.proto.template — анализ

## Вход и цель
- [Факт] Прототип файла `component.proto.template` задаёт структуру protobuf-компонента.
- [Гипотеза] Итогом является шаблон для генерации сообщения и документации.

## Сбор контекста
- [Факт] Использует синтаксис `proto3` и пакет `qiki.{{ component_name | lower }}`.
- [Факт] Подключает `common_types.proto` и `google/protobuf/timestamp.proto`.
- [Гипотеза] Полагается на существование общих типов и timestamp из стандартной библиотеки.

## Локализация артефакта
- [Факт] Путь: `QIKI_DTMP/tools/qiki_docgen/templates/component.proto.template`.
- [Гипотеза] Вызывается генератором `qiki-docgen` при создании контракта.

## Фактический разбор
- [Факт] Поле `id` типа `qiki.common.UUID` с номером 1.
- [Факт] Поле `description` строковое, номер 2.
- [Факт] Поле `created_at` типа `google.protobuf.Timestamp`, номер 3.
- [Гипотеза] Остальные примеры (enum, repeated, oneof, map) предназначены для расширения вручную.

## Роль в системе и связи
- [Гипотеза] Служит шаблоном для описания сообщений компонентов платформы.
- [Гипотеза] Используется при генерации документации и контрактов между сервисами.

## Несоответствия и риски
- High: [Гипотеза] Отсутствие финальной строки с переводом может вызвать предупреждения линтера.
- Med: [Гипотеза] Нет проверки уникальности `id`.
- Low: [Гипотеза] Примеры полей закомментированы и могут быть забыты при реальной реализации.

## Мини-патчи (safe-fix)
- [Патч] Добавить перевод строки в конец файла.
- [Патч] Указать комментарий о необходимости генерации уникального `UUID`.

## Рефактор-скетч (по желанию)
```proto
syntax = "proto3";
package qiki.example;
import "common_types.proto";
message Example {
  qiki.common.UUID id = 1;
  string description = 2;
  google.protobuf.Timestamp created_at = 3;
}
```

## Примеры использования
```bash
protoc --proto_path=. component.proto
```
```bash
protoc --python_out=. component.proto
```
```python
from qiki import Example
msg = Example(id="0000", description="demo")
```
```python
print(msg.SerializeToString())
```
```bash
grep -n "UUID" component.proto
```

## Тест-хуки/чек-лист
- Запустить `protoc --lint_out` для проверки стиля.
- Сгенерировать Python-классы и выполнить сериализацию/десериализацию.
- Проверить, что все номера полей уникальны и не изменяются.
- Убедиться в наличии переводов строки в конце файла.
- Проверить импорты `common_types.proto` и `timestamp.proto`.

## Вывод
1. Шаблон задаёт базовую структуру protobuf-сообщения.
2. Поля `id`, `description`, `created_at` определены явно.
3. Расширения закомментированы и требуют внимания разработчика.
4. Требуется добавить перевод строки и комментарии об обязательных полях.
5. Немедленный фикс: проверить линтером и добавить newline.
6. Отложенное: реализовать примеры enum, repeated, oneof, map.
7. Возможные риски: несогласованность типов и отсутствие уникальности `UUID`.
8. Генерация документации зависит от корректности шаблона.
9. Шаблон должен быть проверен на соответствие стилю protobuf.
10. После правок можно интегрировать в CI для авто проверки.

СПИСОК ФАЙЛОВ
