# СПИСОК ФАЙЛОВ
- /home/sonra44/QIKI_DTMP/services/q_core_agent/config.yaml

## Вход и цель
- [Факт] Изучить основной YAML-конфиг агента.
- [Факт] Итог: обзор параметров, оценка рисков, предложения правок.

## Сбор контекста
- [Факт] Параметры: `tick_interval`, `log_level`, `recovery_delay`, `proposal_confidence_threshold`, `mock_neural_proposals_enabled`.
- [Гипотеза] Файл подхватывается при старте `q_core_agent` для настройки цикла и логирования.

## Локализация артефакта
- [Факт] Путь: `/home/sonra44/QIKI_DTMP/services/q_core_agent/config.yaml`.
- [Факт] YAML, 5 ключей верхнего уровня.

## Фактический разбор
- [Факт] `tick_interval: 5` — период основного цикла в секундах.
- [Факт] `log_level: INFO` — базовый уровень логов.
- [Факт] `recovery_delay: 2` — задержка перед восстановлением.
- [Факт] `proposal_confidence_threshold: 0.6` — порог доверия предложения.
- [Факт] `mock_neural_proposals_enabled: False` — отключение фиктивных предложений.
- [Гипотеза] Отсутствие секции для внешних адресов означает их получение из других файлов.

## Роль в системе и связи
- [Факт] Настройка поведения `main.py` и модулей `core`.
- [Гипотеза] Используется другими сервисами через общий конфиг-менеджер.

## Несоответствия и риски
- [Факт] Нет комментариев к параметрам. — Приоритет: Low.
- [Гипотеза] Невалидные значения не проверяются. — Приоритет: Med.
- [Гипотеза] Отсутствие секции для путей логов. — Приоритет: Low.

## Мини-патчи (safe-fix)
- [Патч] Добавить комментарии с единицами измерения.
- [Патч] Валидация диапазонов значений при чтении.
- [Патч] Рассмотреть параметр `log_file` для перенаправления выводов.

## Рефактор-скетч (по желанию)
```python
dataclass Config:
    tick_interval: int = 5
    log_level: str = "INFO"
    recovery_delay: int = 2
    proposal_confidence_threshold: float = 0.6
    mock_neural_proposals_enabled: bool = False
```

## Примеры использования
```bash
python -c "import yaml,sys;print(yaml.safe_load(open('config.yaml')))"
```
```python
import yaml
cfg = yaml.safe_load(open('config.yaml'))
print(cfg['tick_interval'])
```
```bash
yq '.log_level' config.yaml
```
```python
import pathlib
pathlib.Path('config.yaml').write_text('tick_interval: 10\n')
```
```bash
sed -n '1,5p' config.yaml
```

## Тест-хуки/чек-лист
- Проверить загрузку с отсутствующими ключами.
- Проверить реакцию на нечисловые значения.
- Убедиться в корректности уровня логирования.
- Тест на изменение `tick_interval` во время работы.
- Проверка на наличие файла при старте.

## Вывод
- Конфиг управляет частотой цикла и логированием.
- Параметры не задокументированы внутри файла.
- Отсутствует проверка допустимых диапазонов.
- Возможны ошибки при ручном редактировании.
- Валидация повысит надежность.
- Комментарии облегчат сопровождение.
- Разумно добавить путь к файлу логов.
- Стоит описать формат файла в документации.
- Порог доверия влияет на предложения ИИ.
- Текущие настройки подходят для отладки.

# СПИСОК ФАЙЛОВ
- /home/sonra44/QIKI_DTMP/services/q_core_agent/config.yaml
